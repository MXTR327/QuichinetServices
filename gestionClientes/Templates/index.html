{% extends 'includes/base.html' %}

{% load static %}
{% block content %}

<div class="container mt-4">
    {% include 'includes/nuevo_cliente_formulario.html' %}

    <h2 class="text-white">Listado de clientes</h2>

    <form action method="get" class="mb-3 form-inline">
        {% csrf_token %}
        <div class="row g-3 align-items-center">
            <div class="col-auto">
                <label for="buscar" class="form-label mr-2 text-white">Buscar Cliente:</label>
            </div>
            <div class="col-auto">
                <input type="text" id="buscar" name="buscar" value="{{ request.GET.buscar }}" class="form-control mr-2">
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary">Buscar</button>
            </div>
            <div class="col-auto">
                <button type="button" id="mostrarFormulario" class="btn btn-primary"><i
                        class="bi bi-person-plus-fill"></i></button>
            </div>
        </div>
    </form>

    <div class="table-responsive">
        <table class="table table-striped table-hover table-bordered table-light">
            <thead class="thead-dark">
                <tr class="align-middle text-center">
                    <th class="d-none d-md-table-cell">ID</th>
                    <th>Nombre</th>
                    <th>DNI</th>
                    <th>Dirección</th>
                    <th>Teléfono</th>
                    <th>Instalación</th>
                    <th>Equipo</th>
                    <th>IP</th>
                    <th>Red</th>
                    <th><i class="bi bi-brush-fill"></i></th>
                    <th>Pagos</th>
                </tr>
            </thead>
            <tbody>
                {% for c in clientes %}
                <tr class="align-middle text-center">
                    <td class="d-none d-md-table-cell">{{ c.id_cliente }}</td>
                    <td class="capitalize-first-letter">{{ c.nombre_cliente }} {{ c.apellido_cliente }}</td>
                    <td>{{ c.dni_cliente }}</td>
                    <td class="capitalize-first-letter">{{ c.direccion_cliente }}</td>
                    <td>{{ c.telefono }}</td>
                    <td>{{ c.fecha_conexion|date:"d/m/Y" }}</td>
                    <td>{{ c.equipo }}</td>
                    <td>{{ c.ip }}</td>
                    <td>{{ c.red }}</td>
                    <td>
                        <a href="{% url 'edicionCliente' c.id_cliente %}" class="btn btn-warning btn-sm mt-2 mb-2">
                            <i class="bi bi-pencil-square"></i>
                        </a>
                        <a href="#" class="eliminar-cliente btn btn-danger btn-sm" data-cliente-id="{{ c.id_cliente }}"
                            data-eliminar-url="{% url 'eliminarCliente' 0 %}">
                            <i class="bi bi-trash"></i>
                        </a>
                    </td>
                    <td>
                        <a href="{% url 'informacionPago' c.id_cliente %}" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-eye-fill"></i>
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>
<script src="{% static 'js/index_js.js' %}"></script>

{% endblock %}